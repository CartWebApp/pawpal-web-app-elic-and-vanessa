<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alerts and reminders - PawPal</title>
    <link rel="stylesheet" href="PawPal.css">
</head>
<body>
    <nav>
        <div id="logo">
            <a href="index.html">
              <img src="/images/download 5.png" alt="My Company Logo">
            </a>
          </div>
        <ul>
            <li><a href="dashboard.html">Dashboard</a></li>
            <li><a href="Map.html">Map</a></li>
            <li><a href="Login.html">Login</a></li>
            <li><a href="create-account.html">Signup</a></li>
            <li><a href="about-us.html">About Us</a></li>
        </ul>
    </nav>



    <h1>Alerts and Reminders</h1>
    
    <div class="reminder-form-container">
        <form id="reminder-form"> 
            
            <label for="new-reminder">Reminder Subject:</label>
            <input type="text" id="new-reminder" name="new-reminder" required placeholder="e.g., Morning Walk">

            <label for="activity-details">Activity Details:</label>
            <input type="text" id="activity-details" name="Activity" required placeholder="e.g., 30 minute walk at the park">
            
            <label for="activity-type">Activity Type:</label>
            <select id="activity-type" name="activity-type" required>
                <option value="Feeding">Feeding</option>
                <option value="Walking">Walking</option>
                <option value="Grooming">Grooming</option>
                <option value="Vet-Visit">Vet Visit</option>
                <option value="Medication">Medication</option>
            </select>
            
            <label for="date">Date:</label>
            <input type="date" id="date" name="date" required>

            <label for="time">Time:</label>
            <input type="time" id="time" name="time" required>

            <button type="button" id="submit-button" onclick="addReminder()">Add to Schedule</button>
        </form>
    </div>

    <h2>Upcoming Reminders</h2>
    <ul id="reminder-list">
        </ul>
        <script>
    
    let reminders = JSON.parse(localStorage.getItem("reminders") || "[]");
    const form = document.getElementById("reminder-form");
    const submitBtn = document.getElementById("submit-button");
    let editId = null; // track the reminder being edited

    document.addEventListener("DOMContentLoaded", () => {
        renderReminders();
    });

    submitBtn.addEventListener("click", () => {
        if (editId === null) {
            addReminder();
        } else {
            updateReminder();
        }
    });

    function addReminder() {
        const reminder = getFormData();
        if (!reminder) return;

        reminder.id = Date.now();
        reminders.push(reminder);

        saveAndRender();
        form.reset();
    }

    function getFormData() {
        const subject = document.getElementById('new-reminder').value.trim();
        const details = document.getElementById('activity-details').value.trim();
        const date = document.getElementById('date').value;
        const time = document.getElementById('time').value;
        const type = document.getElementById('activity-type').value;

        if (!subject || !date || !time) {
            alert("Please enter a Reminder Subject, Date, and Time.");
            return null;
        }

        return { subject, details, date, time, type };
    }

    function renderReminders() {
        const list = document.getElementById("reminder-list");
        list.innerHTML = "";

        reminders.forEach(reminder => {
            const li = document.createElement("li");

            li.innerHTML = `
                <span>[${reminder.type}] ${reminder.subject} (${reminder.details}) 
                on ${reminder.date} at ${reminder.time}</span>
                <div class="action-buttons">
                    <button onclick="editReminder(${reminder.id})">Edit</button>
                    <button onclick="deleteReminder(${reminder.id})">Delete</button>
                </div>
            `;

            list.appendChild(li);
        });
    }

    function editReminder(id) {
        const reminder = reminders.find(r => r.id === id);
        if (!reminder) return;

        document.getElementById("new-reminder").value = reminder.subject;
        document.getElementById("activity-details").value = reminder.details;
        document.getElementById("date").value = reminder.date;
        document.getElementById("time").value = reminder.time;
        document.getElementById("activity-type").value = reminder.type;

        submitBtn.textContent = "Update Reminder";
        editId = id;
    }

    function updateReminder() {
        const updatedData = getFormData();
        if (!updatedData) return;

        const index = reminders.findIndex(r => r.id === editId);
        reminders[index] = { ...reminders[index], ...updatedData };

        editId = null;
        submitBtn.textContent = "Add to Schedule";

        saveAndRender();
        form.reset();
    }

    function deleteReminder(id) {
        reminders = reminders.filter(r => r.id !== id);
        saveAndRender();
    }

    function saveAndRender() {
        localStorage.setItem("reminders", JSON.stringify(reminders));
        renderReminders();
    }
</script>